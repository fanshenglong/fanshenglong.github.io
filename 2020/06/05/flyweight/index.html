<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>享元模式 - fansl的个人博客</title><meta description="java,技术分享,后端开发"><meta property="og:type" content="blog"><meta property="og:title" content="anslのblog"><meta property="og:url" content="http://blog.fansl.com.cn/"><meta property="og:site_name" content="fanslのblog"><meta property="og:description" content="java,技术分享,后端开发"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://blog.fansl.com.cn/img/avatar.png"><meta property="article:published_time" content="2020-06-05T12:26:47.000Z"><meta property="article:modified_time" content="2022-07-25T03:57:40.002Z"><meta property="article:author" content="fansl"><meta property="article:tag" content="Java"><meta property="article:tag" content="设计模式"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/avatar.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.fansl.com.cn/"},"headline":"fanslのblog","image":["https://blog.fansl.com.cn/img/avatar.png"],"datePublished":"2020-06-05T12:26:47.000Z","dateModified":"2022-07-25T03:57:40.002Z","author":{"@type":"Person","name":"fansl"},"description":"java,技术分享,后端开发"}</script><link rel="canonical" href="http://blog.fansl.com.cn/2020/06/05/flyweight/"><link rel="alternative" href="/path/to/atom.xml" title="fansl的个人博客" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?276f1480d0bcce1b9986641e0f923794";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script></head><body class="is-2-column"><script type="text/javascript" src="/js/custom/theme-setting.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="fansl的个人博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/fanshenglong"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-06-05T12:26:47.000Z" title="2020-06-05T12:26:47.000Z">2020-06-05</time><span class="level-item"><a class="link-muted mr-2 button is-small" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></span><span class="level-item">12 分钟 读完 (大约 1849 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">享元模式</h1><div class="content"><p><code>享元模式</code>是设计模式中少数几个<code>以提高系统性能为目的</code>的模式之一。它的核心思想是：<code>如果在一个系统中存在多个相同的对象，那么只需共享一份对象的拷贝，而不必为每一次使用都创建新的对象。</code><br>在享元模式中，由于需要构造和维护这些可以共享的对象，因此，常常出现一个工厂类，用于维护和创建对象。<br>享元模式对性能的提升的主要帮助有两点：</p>
<ul>
<li>可以节省重复创建对象的开销，因为被享元模式维护的相同对象只会被创建一次，当创建对象比较耗时时，便可以节省大量时间。</li>
<li>由于创建对象的数量减少，所以对系统内存的需求也减少，这将是的GC的压力也响应地降低，进而使得系统拥有一个更健康的内存结构和更快的反应速度。<a id="more"></a>
享元模式的主要角色有享元工厂、抽象享元、具体享元和主函数几部分组成。</li>
</ul>
<p><strong>享元模式角色</strong></p>
<table>
<thead>
<tr>
<th>角色</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>享元工厂</td>
<td>用于创建具体享元类，维护相同的享元对象。它保证相同的享元对象可以被系统共享。即，其内部使用了类似单例模式的算法，当请求对象已经存在时，直接返回对象，不存在时再创建对象。</td>
</tr>
<tr>
<td>抽象享元</td>
<td>定义需共享的对象的业务接口。享元类被创建出来总是为了实现某些特定的业务逻辑，而抽象享元便定义这些逻辑的语义行为。</td>
</tr>
<tr>
<td>具体享元类</td>
<td>实现抽象享元类的接口，完成一些具体的逻辑</td>
</tr>
<tr>
<td>Main</td>
<td>使用享元模式的组件，通过享元工厂获取享元对象</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>享元模式的结构如图<br><img src="http://oss.fansl.com.cn/image/blog/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%BB%93%E6%9E%84%E5%9B%BE.jpg" alt="享元模式的结构"><br>享元工厂是享元模式的核心，它需要确保系统可以共享相同的对象。一般情况下，享元工厂会维护一个对象列表，当任何组件尝试获取享元类时，如果请求的享元类已经被创建，则直接返回已有的享元类；若没有，则创建一个新的享元对象，并将它加入到维护队列中。</p>
<blockquote>
<p><strong>注意：</strong>享元模式是为数不多的，只为提升系统性能而生的设计模式。它的主要作用就是复用大对象（重量级对象），以节省内存空间和对象创建时间。</p>
</blockquote>
<p>享元模式的一个典型应用是在SAAS系统中。SAAS即Software As A Service,是目前比较流行的一种软件应用模式。<br>以一个人事管理系统的SAAS软件为例，假设公司甲、乙、丙均为这个SAAS系统的用户，则定义每个公司为这套系统的一个租户。每个公司（租户）又各有100个员工。如果这些公司的所有员工都可以登陆这套系统查看自己的收入情况，并且为了系统安全，每个公司都拥有自己独立的数据库。为了使系统的设计最为合理，在这种情况下，便可以使用享元模式为每个租户分别提供工资查询接口，而每个公司下的所有员工可以共享一个查询（因为一个租户下所有的员工数据都存在一个数据库中，他们共享数据库链接）。<br>这样，系统只需要3个共享实例，就足以应付300个员工查询请求了。<br><img src="http://oss.fansl.com.cn/image/blog/%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%9B%BE.jpg" alt="系统结构"><br>ReportManagerFactory为享元工厂，负责创建具体的报表工具，它确保每个公司下的所有员工都共享一个具体的享元实例（FinancialReportManager或者EmployeeReportManager）。这样，当公司甲的两个员工登录，进行财务查询时，系统不必为两个员工都创建FinancialReportManager,而可以让他们共享一个FinancialReportManager实例。<br>通过这个实例，还可以进一步了解享元工厂和对象池的一个重要区别。在一个对象池中，所有的对象都是等价的，任意两个对象在任何使用场景中都可以被对象池中的其他对象代替。而在享元模式中，享元工厂所维护的所有对象都是不同的，任何两个对象间不能相互代替。如本例中，为公司甲创建的FinancialReportManagerA和为公司乙创建的FinancialReportManagerB分别对应了后台各自不同的数据库，因此，两者是不可互相替代的。</p>
<blockquote>
<p><strong>注意：</strong>享元模式和对象池的最大不同在于：享元对象是不可相互替代的，它们各自都有各自的含义和用途；而对象池的对象都是等价的，如数据库连接池中的数据库链接。</p>
</blockquote>
<p>本例中的享元对象接口的实现如下，它用于创建一个报表。即，所有的报表生成类将作为享元对象在一个公司中共享。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IReportManager</span></span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">createReport</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以下是两个报表生成的实例，分别对应员工财务收入报表和员工个人信息报表。他们都是具体的享元类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinancialReportManager</span> <span class="keyword">implements</span> <span class="title">IReportManager</span></span>&#123;<span class="comment">//财务报表</span></span><br><span class="line">    <span class="keyword">protected</span> String tenantId = <span class="keyword">null</span>;<span class="comment">//租户ID</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinancialReportManager</span><span class="params">(String tenantId)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tenantId = tenantId;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createReport</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">" this is a financial report"</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeReportManager</span> <span class="keyword">implements</span> <span class="title">IReportManager</span></span>&#123;<span class="comment">//员工报表</span></span><br><span class="line">    <span class="keyword">protected</span> String tenantId = <span class="keyword">null</span>;<span class="comment">//租户ID</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FinancialReportManager</span><span class="params">(String tenantId)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.tenantId = tenantId;</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createReport</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">" this is an employee report"</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最为核心的享元工厂类实现如下，它也是享元模式的精髓所在。它确保同一个公司（租户）使用相同的对象产生报表。这是相当有意义的，否则系统可能会为每个员工生成各自的报表对象，导致系统开销激增。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReportManagerFactory</span></span>&#123;</span><br><span class="line">    Map&lt;String,IReportManager&gt; financialReportManager= <span class="keyword">new</span> HashMap&lt;String,IReportManager&gt;();</span><br><span class="line">    Map&lt;String,IReportManager&gt; employeeReportManager= <span class="keyword">new</span> HashMap&lt;String,IReportManager&gt;();</span><br><span class="line">    <span class="function">IReportManager <span class="title">getFinancialManager</span><span class="params">(String tenantId)</span></span>&#123;</span><br><span class="line">        IReportManager r = financialReportManager.get(tenantId);</span><br><span class="line">        <span class="keyword">if</span>(r==<span class="keyword">null</span>)&#123;</span><br><span class="line">            r = <span class="keyword">new</span> FinancialReportManager(tenantId);</span><br><span class="line">            financialReportManager.put(tenantId,r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">IReportManager <span class="title">getEmployeeManager</span><span class="params">(String tenantId)</span></span>&#123;</span><br><span class="line">        IReportManager r = employeeReportManager.get(tenantId);</span><br><span class="line">        <span class="keyword">if</span>(r==<span class="keyword">null</span>)&#123;</span><br><span class="line">            r = <span class="keyword">new</span> EmployeeReportManager(tenantId);</span><br><span class="line">            employeeReportManager.put(tenantId,r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>享元模式使用方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     ReportMangerFactory rmf = <span class="keyword">new</span> ReportMangerFactory();</span><br><span class="line">     IReportManager rm = rmf.getFinancialReportManger(<span class="string">"A"</span>);</span><br><span class="line">     System.out.println(rm.createReport());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ReportMangerFactory作为享元工厂，以租客的ID为索引，维护了一个享元对象的集合，它确保相同租客的请求都返回同一个享元实例，确保享元对象的有效复用。</p>
<p><em>参考文章:</em>  </p>
<ul>
<li><a href="javascript:void(0)">Java程序性能优化</a></li>
</ul>
</div><div class="article-tags size-small is-uppercase mb-4"><span class="mr-2">#</span><a class="link-muted mr-2 button is-small" rel="tag" href="/tags/Java/"><i class="fas fa-tags"> </i>Java</a><a class="link-muted mr-2 button is-small" rel="tag" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><i class="fas fa-tags"> </i>设计模式</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2022/07/20/gpdsgr/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Java基础-语法基础</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/05/15/proxy/"><span class="level-item">代理模式</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: 'f4d0058887f4252df824dae42482d1cd',
            repo: 'fanshenglong.github.io',
            owner: 'fanshenglong',
            clientID: '547655d4ccec493dad48',
            clientSecret: '92207d66ca2ea4fb5b99d571c84da708f894f88a',
            admin: ["fanshenglong"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><!--!--><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="" src="/img/avatar.png" alt="fanshenglong"></figure><p class="title is-size-4 is-block line-height-inherit">fanshenglong</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">15</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/" target="_blank" rel="noopener">关注我</a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiYan(){
                                $.ajax({
                                    type: 'GET',
                                    url: 'https://v1.hitokoto.cn/',
                                    success: function (data) {
                                          $('#hitokoto').html("");
                                          $('#hitokoto').append("<strong>"+data.hitokoto+"</strong>"+
                                           "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                    }
                                });
                           };
                           $(function (){getYiYan();$('#hitokoto').click(function(){getYiYan();})});</script></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2022-07-25T03:42:08.000Z">2022-07-25</time></p><p class="title is-6"><a class="link-muted" href="/2022/07/25/gmrl14/">Java基础-异常</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a> / <a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/Java%E5%9F%BA%E7%A1%80/">Java基础</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2022-07-21T09:22:56.000Z">2022-07-21</time></p><p class="title is-6"><a class="link-muted" href="/2022/07/21/zvn4dc/">Java基础-注解</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a> / <a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/Java%E5%9F%BA%E7%A1%80/">Java基础</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2022-07-21T08:44:09.000Z">2022-07-21</time></p><p class="title is-6"><a class="link-muted" href="/2022/07/21/nbzv8i/">Java基础-泛型</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a> / <a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/Java%E5%9F%BA%E7%A1%80/">Java基础</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2022-07-20T10:31:38.000Z">2022-07-20</time></p><p class="title is-6"><a class="link-muted" href="/2022/07/20/gpdsgr/">Java基础-语法基础</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a> / <a class="link-muted" href="/categories/%E9%9D%A2%E8%AF%95/Java%E5%9F%BA%E7%A1%80/">Java基础</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-06-05T12:26:47.000Z">2020-06-05</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/05/flyweight/">享元模式</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="fansl的个人博客" height="28"></a><p class="size-small"><span>&copy; 2022 fanshenglong</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/04/15 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">0</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">0</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/fanshenglong"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'http://blog.fansl.com.cn',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script><script type="text/javascript" src="/js/custom/universe.js"></script></body></html>